<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checklist Supervisión VIGIMAN</title>
  <?!= HtmlService.createHtmlOutputFromFile('style').getContent(); ?>
</head>
<body>
  <div class="wrap">
    <h1>Supervisión VIGIMAN</h1>

    <form id="mainForm">

      <label>Unidad</label>
      <select id="unidad" name="unidad" required></select>

      <label>Fecha de supervisión</label>
      <input type="date" id="fechaInicio" name="fechaInicio" readonly>

      <label>Hora de inicio</label>
      <input type="time" id="horaInicio" name="horaInicio" readonly>

      <label>Nombre del Supervisor</label>
      <input type="text" id="supervisorNombre" name="supervisorNombre" required>

      <label>DNI del Supervisor</label>
      <input type="text" id="supervisorDni" name="supervisorDni" required>

      <label>Cantidad de VIGIMAN (máx 20)</label>
      <input type="number" id="numVigiman" name="numVigiman" min="1" max="20" value="1">

      <button type="button" id="generarBtn">GENERAR CAMPOS</button>

      <div id="vigimanContainer"></div>

      <div class="row">
        <button type="button" id="ubicacionBtn">📍 Cargar Ubicación</button>
        <input type="text" id="ubicacion" name="ubicacion" placeholder="Lat,Lng" readonly>
      </div>

      <label>Foto de Supervisión (puede tomar o subir varias)</label>
      <input type="file" id="fotosSupervision" name="fotosSupervision" accept="image/*" capture="environment" multiple>

      <div class="row">
        <button type="button" id="finalizarBtn">Finalizar Supervisión (marcar hora fin)</button>
        <input type="time" id="horaFin" name="horaFin" readonly>
      </div>

      <button type="submit" id="enviarBtn">Enviar Supervisión</button>

      <p id="msg" class="msg"></p>
    </form>
  </div>

  <script>
    // Inyecta el script cliente que está en archivo Script (Apps Script will serve it)
  </script>
  <?!= HtmlService.createHtmlOutputFromFile('script').getContent(); ?>
</body>
</html>
